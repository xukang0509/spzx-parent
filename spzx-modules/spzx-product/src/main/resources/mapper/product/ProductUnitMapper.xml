<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.spzx.product.mapper.ProductUnitMapper">

    <sql id="selectProductUnitBase">
        select pu.id, pu.name, pu.create_time, pu.create_by, pu.update_time, pu.update_by, pu.del_flag, pu.remark
        from product_unit pu
    </sql>

    <select id="selectProductUnitPage" resultType="com.spzx.product.domain.ProductUnit">
        <include refid="selectProductUnitBase"/>
        where pu.del_flag = 0
        <if test="query.name != null and query.name != ''">
            and name like concat('%', #{query.name}, '%')
        </if>
    </select>

    <update id="deleteProductUnitByIds">
        update product_unit
        set del_flag = 2, update_by = #{username}, update_time = sysdate()
        where del_flag = 0 and id in
        <foreach collection="ids" item="id" open="(" separator="," close=")">
            #{id}
        </foreach>
    </update>
</mapper>